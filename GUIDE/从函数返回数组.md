# C 从函数返回数组

[C 学习之路](../README.md)  
C语言不允许返回一个完整的数组作为函数的参数。但是，可以通过指定不带索引的数组名来返回一个指向数组的指针。  
如果想要从函数返回一个一维数组，必须声明一个返回指针的函数，如下：

```c
int *myFunction()
{
    ...
}
```

另外，C不支持在函数外返回局部变量的地址，除非定义局部变量为`static`变量。  
现在，看看下面的函数，它会生成10个随机数，并使用数组来返回它们，具体如下：

```c
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

/* 要生成和返回随机数的函数 */
int* getRandom()
{
    static int r[10];
    
    /* 设置种子 */
    srand((unsigned)time(NULL));
    for (int i = 0; i < 10; i++)
    {
        r[i] = rand();
        printf("r[%d] = %d\n", i, r[i]);
    }
    
    return r;
}

/* 要调用上面定义函数的主函数 */
int main()
{
    /* 一个指向整数的指针 */
    int* p;
    
    p = getRandom();

    for (int i = 0; i < 10; i++)
    {
        printf("*(p + %d) : %d\n", i, *(p + i));
    }

    return 0;
}
```

当上面的代码被编译和执行时，运行结果：
> r[0] = 30894  
r[1] = 8343  
r[2] = 1409  
r[3] = 2689  
r[4] = 17213  
r[5] = 22787  
r[6] = 21038  
r[7] = 2023  
r[8] = 20732  
r[9] = 3375  
*(p + 0) : 30894  
*(p + 1) : 8343  
*(p + 2) : 1409  
*(p + 3) : 2689  
*(p + 4) : 17213  
*(p + 5) : 22787  
*(p + 6) : 21038  
*(p + 7) : 2023  
*(p + 8) : 20732  
*(p + 9) : 3375
