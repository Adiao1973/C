# C 从函数返回指针

[C 学习之路](../README.md)  
我们已经了解了C语言中如何从函数中返回数组，类似地，C允许从函数返回指针。为了做到这点，必须声明一个返回指针的函数，如下所示：

```c
int *myFunction()
{
    ...
}
```

另外，C语言不支持在调用函数时返回局部变量的地址，除非定义局部变量为`static`变量。  
现在，看看下面的函数，它会生成10个随机数，并使用表示指针的数组名（即第一个数组元素的地址）来返回它们，具体如下：

```c
#include <stdio.h>
#include <time.h>
#include <stdlib.h>

/* 要生成和返回随机数的函数 */
int * getRandom()
{
    static int r[10];
    
    /* 设置种子 */
    srand((unsigned)time(NULL));
    for (int i = 0; i < 10; ++i)
    {
        r[i] = rand();
        printf("%d\n", r[i]);
    }
    return r;
}

/* 要调用上面定义函数的主函数 */
int main()
{
    /* 一个指向整数的指针 */
    int *p;

    p = getRandom();
    for (int i = 0; i < 10; i++)
    {
        printf("*(p + [%d]): %d\n", i, *(p + i));
    }
    
    return 0;
}
```

当上面的代码被编译和执行时，运行结果：
> 1963  
25548  
5020  
24644  
11251  
8741  
10561  
13952  
18425  
17694  
*(p + [0]): 1963  
*(p + [1]): 25548  
*(p + [2]): 5020  
*(p + [3]): 24644  
*(p + [4]): 11251  
*(p + [5]): 8741  
*(p + [6]): 10561  
*(p + [7]): 13952  
*(p + [8]): 18425  
*(p + [9]): 17694
